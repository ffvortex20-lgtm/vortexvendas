<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout Seguro | Vortex</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#050505] text-white flex items-center justify-center min-h-screen p-4">

    <div class="max-w-md w-full bg-zinc-900 border border-zinc-800 rounded-[3rem] overflow-hidden shadow-2xl">
        <div id="mediaArea" class="w-full h-52 bg-zinc-800"></div>
        
        <div class="p-8 text-center">
            <h2 id="vNome" class="text-3xl font-black italic text-red-600 mb-6 uppercase"></h2>
            
            <div class="bg-black p-6 rounded-3xl mb-8 border border-zinc-800">
                <span class="text-zinc-500 text-xs block mb-1 uppercase font-bold">Valor do Item</span>
                <span id="vPreco" class="text-4xl font-black italic"></span>
            </div>

            <button onclick="gerarPix()" id="btnPagar" class="w-full bg-red-600 py-5 rounded-2xl font-black hover:bg-red-700 transition uppercase shadow-xl shadow-red-600/20">Gerar Chave PIX</button>

            <div id="pixArea" class="hidden mt-6 animate-pulse">
                <p class="text-[10px] text-green-500 font-bold mb-2 uppercase">Chave Copiada! Pague agora:</p>
                <div class="bg-black p-4 rounded-xl border border-zinc-700 mb-4">
                    <input type="text" id="pixKey" readonly class="bg-transparent text-[10px] w-full text-zinc-400 text-center outline-none">
                </div>
                <button onclick="confirmar()" class="w-full bg-green-600 py-4 rounded-xl font-black text-sm uppercase">J√° realizei o pagamento</button>
            </div>
        </div>
    </div>

    <script>
        const params = new URLSearchParams(window.location.search);
        const nome = params.get('n');
        const preco = params.get('p');
        const pix = params.get('pix');
        const midia = params.get('i');
        const entrega = params.get('ent');

        document.getElementById('vNome').innerText = nome;
        document.getElementById('vPreco').innerText = "R$ " + preco;

        // Mostrar M√≠dia
        const mediaArea = document.getElementById('mediaArea');
        if(midia.includes('youtu')) {
            let vid = midia.split('v=')[1] || midia.split('/').pop();
            mediaArea.innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${vid}"></iframe>`;
        } else {
            mediaArea.innerHTML = `<img src="${midia}" class="w-full h-full object-cover">`;
        }

        function gerarPix() {
            // Exibe a √°rea do Pix
            document.getElementById('pixKey').value = pix;
            document.getElementById('btnPagar').classList.add('hidden');
            document.getElementById('pixArea').classList.remove('hidden');
            
            // Copia a chave automaticamente
            navigator.clipboard.writeText(pix);
        }

        function confirmar() {
            const msg = `üõ°Ô∏è *PAGAMENTO REALIZADO*\nüì¶ *ITEM:* ${nome}\nüí∞ *VALOR:* R$ ${preco}\n\n_Favor liberar meu produto._`;
            // Redireciona para o suporte/WhatsApp para voc√™ conferir o pagamento e ele receber o link
            window.location.href = `https://wa.me/55SEUNUMERO?text=${encodeURIComponent(msg)}`;
        }
    </script>
</body>
</html>
